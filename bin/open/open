#!/usr/bin/env bash

# Enable or disable logging. Set to "true" to enable logging, "false" to disable.
logging_enabled="false"

# Specify the log file path
log_file="$HOME/log.txt"

# Function to log a message, if logging is enabled
function log_message() {
    if [ "$logging_enabled" = "true" ]; then
        echo "$(date) - $1" >> $log_file
    fi
}

# Log the input before encoding it
log_message "Before encoding: ${@}"

# Base64 encode the input and log it
encoded=$(echo -n "${@}" | base64 -w0)
log_message "Encoded: $encoded"

# Send the encoded input
echo "$encoded" | nc localhost 20502

# Log that the data has been sent
log_message "Data sent"

