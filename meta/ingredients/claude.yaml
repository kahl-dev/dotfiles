- defaults:
    link:
      relink: true
      create: true
      force: true
    shell:
      quiet: false
      stderr: true

- clean: []

- link:
    ~/.claude/agents: ./.claude.global/agents
    ~/.claude/commands: ./.claude.global/commands
    ~/.claude/hooks: ./.claude.global/hooks
    ~/.claude/instructions: ./.claude.global/instructions
    ~/.claude/shared: ./.claude.global/shared
    ~/.claude/settings.json: ./.claude.global/settings.json
    ~/.claude/statusline.sh: ./.claude.global/statusline.sh
    ~/.claude/CLAUDE.md: ./.claude.global/GLOBAL.CLAUDE.md

- shell:
    - description: "Remove legacy ~/.claude.global symlink if it exists"
      command: |
        if [ -L "$HOME/.claude.global" ]; then
          echo "Removing legacy ~/.claude.global symlink..."
          rm -f "$HOME/.claude.global"
        fi
    - description: "Create AI workspace directories for Claude"
      command: |
        mkdir -p ~/tmp/ai/screenshots \
                 ~/tmp/ai/jira \
                 ~/tmp/ai/exports \
                 ~/tmp/ai/figma \
                 ~/tmp/ai/downloads \
                 ~/tmp/ai/analysis \
                 ~/tmp/ai/cache
    - description: "Link host-specific Claude settings if needed"
      command: |
        HOSTNAME=$(hostname -s)
        case "$HOSTNAME" in
          "typo3")
            ln -sf "$HOME/.dotfiles/.claude.global/settings/liadev.json" "$HOME/.claude/settings.local.json"
            echo "Linked liadev-specific Claude settings for typo3"
            ;;
          *)
            # Remove any existing local settings symlink for other hosts
            rm -f "$HOME/.claude/settings.local.json"
            ;;
        esac

